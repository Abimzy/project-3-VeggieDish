{% extends "layout.html" %}

{% block content %}
{% if current_user.is_authenticated %}
<h1>Recipes</h1>
<div class="user-recipes-container">
        <br/>
        <div class="recipes-functionality">
            <div>
                <input type="text" class="search" id="myInput" onkeyup="searchFunction()" placeholder="Search by keyword">
                <div class="all-recipes user-recipes">
                    {% for recipe in recipes_template %}
            
                    <article class="message tile is-6 is-vertical is-parent is-primary">
                        <div class="message-body tile is-child box">
                            <h2><a href={{url_for('recipes', recipe_id=recipe.id)}}>{{recipe.name}}</a></h2>
                            <img src={{recipe.image}} alt="">
                            <h4>Description</h4>
                            <div>{{recipe.description}}</div>
                            <div>Rating: {{recipe.average_rating}}</div>
                            {% if current_user.id == recipe.user_id.id %}
                            <form action="" method="POST">
                                <input name="recipeid" type="hidden" value="{{recipe.id}}">
                                {{form.submit(value="Edit")}}
                                {{form.submit(value="Delete")}}
                            </form>
                            {% endif%}
                        </div>
                    </article>
                    {% endfor %}
                </div>
            </div>
            <div>
                <button class="is-medium is-outlined create-recipe" onclick="openRecipeForm()">Share your recipe with us!</button>
                <div class="recipe-form">
                        {% include "recipe_form.html"%}
                </div>
            </div>
        </div>
</div>
{% else %}

<a href="{{ url_for('login') }}"><h1>Please Log In</h1></a>
{% endif %}

{% endblock %}